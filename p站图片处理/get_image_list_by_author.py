from os import write
import requests
from bs4 import BeautifulSoup
import csv

headers = {
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.190 Safari/537.36 FS"}

author_list = [
    "https://www.pixiv.net/ajax/user/20671215/profile/illusts?ids%5B%5D=93805414&ids%5B%5D=93320761&ids%5B%5D=93283304&ids%5B%5D=93033065&ids%5B%5D=92767525&ids%5B%5D=91572755&ids%5B%5D=91440829&ids%5B%5D=90871692&ids%5B%5D=90502712&ids%5B%5D=90066970&ids%5B%5D=90061619&ids%5B%5D=89949548&ids%5B%5D=89360995&ids%5B%5D=88409658&ids%5B%5D=88116019&ids%5B%5D=87262605&ids%5B%5D=86652461&ids%5B%5D=86423645&ids%5B%5D=85986048&ids%5B%5D=85715485&ids%5B%5D=84949793&ids%5B%5D=84497137&ids%5B%5D=83859447&ids%5B%5D=83574746&ids%5B%5D=83189109&ids%5B%5D=82711678&ids%5B%5D=82518111&ids%5B%5D=82227665&ids%5B%5D=81994667&ids%5B%5D=81766555&ids%5B%5D=81429506&ids%5B%5D=81261505&ids%5B%5D=81104888&ids%5B%5D=81005165&ids%5B%5D=80766713&ids%5B%5D=79723032&ids%5B%5D=79217386&ids%5B%5D=78839233&ids%5B%5D=78711301&ids%5B%5D=76330172&ids%5B%5D=75700374&ids%5B%5D=75139817&ids%5B%5D=74696187&ids%5B%5D=74576288&ids%5B%5D=74092784&ids%5B%5D=72990264&ids%5B%5D=72739009&ids%5B%5D=71807445&work_category=illustManga&is_first_page=1&lang=zh",
    "https://www.pixiv.net/ajax/user/20671215/profile/illusts?ids%5B%5D=69512150&ids%5B%5D=69362783&ids%5B%5D=69182056&ids%5B%5D=68658271&ids%5B%5D=68024709&ids%5B%5D=67427669&work_category=illustManga&is_first_page=0&lang=zh",
    "https://www.pixiv.net/ajax/user/28478367/profile/illusts?ids%5B%5D=94188896&ids%5B%5D=93937873&ids%5B%5D=93607441&ids%5B%5D=93365174&ids%5B%5D=93178394&ids%5B%5D=93041833&ids%5B%5D=92919116&ids%5B%5D=92723867&ids%5B%5D=92502633&ids%5B%5D=92384963&ids%5B%5D=92236626&ids%5B%5D=92105314&ids%5B%5D=92062364&ids%5B%5D=91924282&ids%5B%5D=91723263&ids%5B%5D=91618079&ids%5B%5D=91295460&ids%5B%5D=91199002&ids%5B%5D=91105384&ids%5B%5D=90917600&ids%5B%5D=90779366&ids%5B%5D=90759117&ids%5B%5D=90554682&ids%5B%5D=90526126&ids%5B%5D=90496316&ids%5B%5D=90277673&ids%5B%5D=90227949&ids%5B%5D=90035387&ids%5B%5D=89840267&ids%5B%5D=89814906&ids%5B%5D=89498524&ids%5B%5D=89300473&ids%5B%5D=89148686&ids%5B%5D=89082472&ids%5B%5D=88676904&ids%5B%5D=88497636&ids%5B%5D=88377140&ids%5B%5D=88240096&ids%5B%5D=87874437&ids%5B%5D=87757310&ids%5B%5D=87693275&ids%5B%5D=87427422&ids%5B%5D=87300067&ids%5B%5D=87143012&ids%5B%5D=87088023&ids%5B%5D=86799771&ids%5B%5D=86672076&ids%5B%5D=86477110&work_category=illustManga&is_first_page=1&lang=zh",
    "https://www.pixiv.net/ajax/user/28478367/profile/illusts?ids%5B%5D=85988896&ids%5B%5D=85648620&ids%5B%5D=85337684&ids%5B%5D=85115095&ids%5B%5D=85071117&ids%5B%5D=84902636&ids%5B%5D=84712438&ids%5B%5D=84712157&ids%5B%5D=84465128&ids%5B%5D=84319868&ids%5B%5D=83950904&ids%5B%5D=83586741&ids%5B%5D=83565387&ids%5B%5D=83428809&ids%5B%5D=83170191&ids%5B%5D=83170015&ids%5B%5D=83056984&ids%5B%5D=82924621&ids%5B%5D=82368638&ids%5B%5D=81897352&ids%5B%5D=81792503&ids%5B%5D=80245302&ids%5B%5D=79685821&ids%5B%5D=79242755&ids%5B%5D=77713447&ids%5B%5D=77109015&ids%5B%5D=75063114&ids%5B%5D=72641422&ids%5B%5D=72229505&ids%5B%5D=70303136&ids%5B%5D=69721551&ids%5B%5D=69721418&ids%5B%5D=66962930&work_category=illustManga&is_first_page=0&lang=zh",
    "https://www.pixiv.net/ajax/user/29694453/profile/illusts?ids%5B%5D=94195076&ids%5B%5D=94112883&ids%5B%5D=93986783&ids%5B%5D=93900596&ids%5B%5D=93826166&ids%5B%5D=93571533&ids%5B%5D=93404777&ids%5B%5D=93226180&ids%5B%5D=93106882&ids%5B%5D=92939773&ids%5B%5D=92842491&ids%5B%5D=92774035&ids%5B%5D=92701202&ids%5B%5D=92625393&ids%5B%5D=92535053&ids%5B%5D=92412666&ids%5B%5D=92184475&ids%5B%5D=91978544&ids%5B%5D=91773126&ids%5B%5D=91662311&ids%5B%5D=91425581&ids%5B%5D=91179840&ids%5B%5D=90945000&ids%5B%5D=90622328&ids%5B%5D=90537880&ids%5B%5D=90348949&ids%5B%5D=90276225&ids%5B%5D=90135701&ids%5B%5D=90021677&ids%5B%5D=89936699&ids%5B%5D=89754554&ids%5B%5D=89754398&ids%5B%5D=89346198&ids%5B%5D=89346122&ids%5B%5D=89116869&ids%5B%5D=88865525&ids%5B%5D=88324479&ids%5B%5D=88165413&ids%5B%5D=87974870&ids%5B%5D=87829598&ids%5B%5D=87775424&ids%5B%5D=86538479&ids%5B%5D=86362715&ids%5B%5D=85366484&ids%5B%5D=84975251&ids%5B%5D=82575203&ids%5B%5D=82108180&ids%5B%5D=80327688&work_category=illustManga&is_first_page=1&lang=zh",
    "https://www.pixiv.net/ajax/user/29694453/profile/illusts?ids%5B%5D=80167095&ids%5B%5D=80003952&ids%5B%5D=79681393&ids%5B%5D=79127818&ids%5B%5D=78966708&ids%5B%5D=77575486&ids%5B%5D=77522739&work_category=illustManga&is_first_page=0&lang=zh",
    "https://www.pixiv.net/ajax/user/38934504/profile/illusts?ids%5B%5D=92591270&ids%5B%5D=92449094&ids%5B%5D=90150556&ids%5B%5D=89940945&ids%5B%5D=88952302&ids%5B%5D=88399384&ids%5B%5D=87991868&ids%5B%5D=85899379&ids%5B%5D=85627286&ids%5B%5D=85116042&ids%5B%5D=84971446&ids%5B%5D=84442505&ids%5B%5D=83105924&ids%5B%5D=83059839&ids%5B%5D=82383344&ids%5B%5D=81401269&ids%5B%5D=81130036&ids%5B%5D=80926275&ids%5B%5D=80763113&ids%5B%5D=80574373&ids%5B%5D=80107278&work_category=illustManga&is_first_page=1&lang=zh",
    "https://www.pixiv.net/ajax/user/1198913/profile/illusts?ids%5B%5D=92197294&ids%5B%5D=89566734&ids%5B%5D=89528350&ids%5B%5D=89321415&ids%5B%5D=81074654&ids%5B%5D=80740178&ids%5B%5D=80671757&ids%5B%5D=80365250&ids%5B%5D=78369890&ids%5B%5D=78106859&ids%5B%5D=77892701&ids%5B%5D=77764899&ids%5B%5D=77334915&ids%5B%5D=77041874&ids%5B%5D=76533140&ids%5B%5D=76435086&ids%5B%5D=76398027&ids%5B%5D=76363839&ids%5B%5D=74739392&ids%5B%5D=74386966&ids%5B%5D=74231755&ids%5B%5D=74217601&ids%5B%5D=74200144&ids%5B%5D=74181089&ids%5B%5D=74165482&ids%5B%5D=74151556&ids%5B%5D=74137737&ids%5B%5D=74129396&ids%5B%5D=71518501&ids%5B%5D=69983150&ids%5B%5D=69758024&ids%5B%5D=68883799&ids%5B%5D=68302572&ids%5B%5D=67375446&ids%5B%5D=67265336&ids%5B%5D=66364037&ids%5B%5D=66308108&ids%5B%5D=65387373&ids%5B%5D=64944649&ids%5B%5D=64546487&ids%5B%5D=64164083&ids%5B%5D=63843138&ids%5B%5D=63623116&ids%5B%5D=63511691&ids%5B%5D=57247061&ids%5B%5D=57130779&ids%5B%5D=56851661&ids%5B%5D=56703661&work_category=illustManga&is_first_page=1&lang=zh",
    "https://www.pixiv.net/ajax/user/3440024/profile/illusts?ids%5B%5D=94011351&ids%5B%5D=93964543&ids%5B%5D=93791018&ids%5B%5D=93687155&ids%5B%5D=93538502&ids%5B%5D=93420136&ids%5B%5D=93386973&ids%5B%5D=93230100&ids%5B%5D=93066982&ids%5B%5D=92898144&ids%5B%5D=92817126&ids%5B%5D=92731384&ids%5B%5D=92607167&ids%5B%5D=92563748&ids%5B%5D=92440098&ids%5B%5D=92388678&ids%5B%5D=92260993&ids%5B%5D=92215267&ids%5B%5D=92134799&ids%5B%5D=92042129&ids%5B%5D=91982216&ids%5B%5D=91856367&ids%5B%5D=91687528&ids%5B%5D=91523633&ids%5B%5D=91474777&ids%5B%5D=91362162&ids%5B%5D=91205424&ids%5B%5D=91042468&ids%5B%5D=90880885&ids%5B%5D=90722055&ids%5B%5D=90560988&ids%5B%5D=90423503&ids%5B%5D=90402074&ids%5B%5D=90236325&ids%5B%5D=90158436&ids%5B%5D=90137564&ids%5B%5D=90117535&ids%5B%5D=90097059&ids%5B%5D=90076175&ids%5B%5D=90053002&ids%5B%5D=90023488&ids%5B%5D=90000189&ids%5B%5D=89950665&ids%5B%5D=89864554&ids%5B%5D=89810750&ids%5B%5D=89776343&ids%5B%5D=89755445&ids%5B%5D=89578349&work_category=illustManga&is_first_page=1&lang=zh",
    "https://www.pixiv.net/ajax/user/3440024/profile/illusts?ids%5B%5D=89454491&ids%5B%5D=89395564&ids%5B%5D=89305668&ids%5B%5D=89245476&ids%5B%5D=89069690&ids%5B%5D=88865200&ids%5B%5D=88797307&ids%5B%5D=88748209&ids%5B%5D=88588610&ids%5B%5D=88359734&ids%5B%5D=88127457&ids%5B%5D=88070694&ids%5B%5D=87952361&ids%5B%5D=87855678&ids%5B%5D=87811259&ids%5B%5D=87791123&ids%5B%5D=87772217&ids%5B%5D=87745800&ids%5B%5D=87745643&ids%5B%5D=87698065&ids%5B%5D=87535258&ids%5B%5D=87469444&ids%5B%5D=87347935&ids%5B%5D=87188246&ids%5B%5D=87168104&ids%5B%5D=87033434&ids%5B%5D=87033413&ids%5B%5D=86965759&ids%5B%5D=86914162&ids%5B%5D=86893185&ids%5B%5D=86871427&ids%5B%5D=86849016&ids%5B%5D=86825740&ids%5B%5D=86747133&ids%5B%5D=86633595&ids%5B%5D=86610551&ids%5B%5D=86610513&ids%5B%5D=86589356&ids%5B%5D=86509802&ids%5B%5D=86379928&ids%5B%5D=86306661&ids%5B%5D=86238865&ids%5B%5D=86181783&ids%5B%5D=86162805&ids%5B%5D=86093822&ids%5B%5D=85945662&ids%5B%5D=85944712&ids%5B%5D=85816844&work_category=illustManga&is_first_page=0&lang=zh",
    "https://www.pixiv.net/ajax/user/3440024/profile/illusts?ids%5B%5D=85634126&ids%5B%5D=85572550&ids%5B%5D=85338408&ids%5B%5D=85300107&ids%5B%5D=85158311&ids%5B%5D=85120626&ids%5B%5D=85016631&ids%5B%5D=84998107&ids%5B%5D=84869514&ids%5B%5D=84849470&ids%5B%5D=84717395&ids%5B%5D=84660226&ids%5B%5D=84590303&ids%5B%5D=84504593&ids%5B%5D=84399453&ids%5B%5D=84287625&ids%5B%5D=84205916&ids%5B%5D=84095301&ids%5B%5D=83996110&ids%5B%5D=83913566&ids%5B%5D=83866401&ids%5B%5D=83799764&ids%5B%5D=83799675&ids%5B%5D=83736929&ids%5B%5D=83658273&ids%5B%5D=83612821&ids%5B%5D=83466270&ids%5B%5D=83406152&ids%5B%5D=83312509&ids%5B%5D=82979026&ids%5B%5D=82910246&ids%5B%5D=82867291&ids%5B%5D=82803840&ids%5B%5D=82756389&ids%5B%5D=82712769&ids%5B%5D=82669856&ids%5B%5D=82523096&ids%5B%5D=82392308&ids%5B%5D=82301254&ids%5B%5D=82193095&ids%5B%5D=82114621&ids%5B%5D=82090524&ids%5B%5D=82048645&ids%5B%5D=81438771&ids%5B%5D=81212232&ids%5B%5D=81112484&ids%5B%5D=80862715&ids%5B%5D=80818766&work_category=illustManga&is_first_page=0&lang=zh",
    "https://www.pixiv.net/ajax/user/3440024/profile/illusts?ids%5B%5D=80678301&ids%5B%5D=80615890&ids%5B%5D=80524398&ids%5B%5D=80271985&ids%5B%5D=79792693&ids%5B%5D=79325109&ids%5B%5D=79011328&ids%5B%5D=78888869&ids%5B%5D=78714003&ids%5B%5D=78713943&ids%5B%5D=78483464&ids%5B%5D=77879667&ids%5B%5D=77573324&ids%5B%5D=77471343&ids%5B%5D=77286077&ids%5B%5D=77026141&ids%5B%5D=76877143&ids%5B%5D=76777820&ids%5B%5D=76522728&ids%5B%5D=76368268&ids%5B%5D=76311271&ids%5B%5D=75989734&ids%5B%5D=75844194&ids%5B%5D=75772446&ids%5B%5D=74700886&ids%5B%5D=74630331&ids%5B%5D=73145908&ids%5B%5D=72277890&ids%5B%5D=72113488&ids%5B%5D=72026736&ids%5B%5D=71594966&ids%5B%5D=71565448&ids%5B%5D=71439758&ids%5B%5D=71424715&ids%5B%5D=71257844&ids%5B%5D=71151812&ids%5B%5D=71124378&ids%5B%5D=71037147&ids%5B%5D=70858496&ids%5B%5D=70777410&ids%5B%5D=70731131&ids%5B%5D=69925798&ids%5B%5D=69335118&ids%5B%5D=69092599&ids%5B%5D=68985613&ids%5B%5D=67204153&ids%5B%5D=65795401&ids%5B%5D=65751878&work_category=illustManga&is_first_page=0&lang=zh",
    "https://www.pixiv.net/ajax/user/3440024/profile/illusts?ids%5B%5D=65591996&ids%5B%5D=65564384&ids%5B%5D=62522107&ids%5B%5D=62470480&ids%5B%5D=62456908&work_category=illustManga&is_first_page=0&lang=zh",
    "https://www.pixiv.net/ajax/user/31832981/profile/illusts?ids%5B%5D=94208708&ids%5B%5D=94180065&ids%5B%5D=94154282&ids%5B%5D=94115126&ids%5B%5D=94036977&ids%5B%5D=93892842&ids%5B%5D=93833924&ids%5B%5D=93712498&ids%5B%5D=93671202&ids%5B%5D=93601103&ids%5B%5D=93561359&ids%5B%5D=93447338&ids%5B%5D=93389477&ids%5B%5D=93368177&ids%5B%5D=93333790&ids%5B%5D=93313436&ids%5B%5D=92201861&ids%5B%5D=91666005&ids%5B%5D=91567215&ids%5B%5D=91532267&ids%5B%5D=91501337&ids%5B%5D=91457738&ids%5B%5D=91384087&ids%5B%5D=91339949&ids%5B%5D=91297848&ids%5B%5D=91280007&ids%5B%5D=91257708&ids%5B%5D=91217704&ids%5B%5D=91164847&ids%5B%5D=91132977&ids%5B%5D=91098201&ids%5B%5D=91064788&ids%5B%5D=91023610&ids%5B%5D=90992514&ids%5B%5D=90971205&ids%5B%5D=90934694&ids%5B%5D=90903057&ids%5B%5D=90594025&ids%5B%5D=90571042&ids%5B%5D=90543799&ids%5B%5D=90524378&ids%5B%5D=90491515&ids%5B%5D=90445878&ids%5B%5D=90433111&ids%5B%5D=90384103&ids%5B%5D=90383988&ids%5B%5D=90383968&ids%5B%5D=90383957&work_category=illustManga&is_first_page=1&lang=zh",
    "https://www.pixiv.net/ajax/user/31832981/profile/illusts?ids%5B%5D=90351453&ids%5B%5D=90308662&ids%5B%5D=90282504&ids%5B%5D=90261253&ids%5B%5D=90173150&ids%5B%5D=90168058&ids%5B%5D=90127610&ids%5B%5D=90110001&ids%5B%5D=90060349&ids%5B%5D=90007487&ids%5B%5D=89991675&ids%5B%5D=89969619&ids%5B%5D=89944000&ids%5B%5D=89911987&ids%5B%5D=89877965&ids%5B%5D=89847328&ids%5B%5D=89824784&ids%5B%5D=89802203&ids%5B%5D=89775395&ids%5B%5D=89761368&ids%5B%5D=89758969&ids%5B%5D=89738695&ids%5B%5D=89661127&ids%5B%5D=89639764&ids%5B%5D=89637305&ids%5B%5D=89603812&ids%5B%5D=89579694&ids%5B%5D=89553091&ids%5B%5D=89525240&ids%5B%5D=89499754&ids%5B%5D=89470573&ids%5B%5D=89453321&ids%5B%5D=89434339&ids%5B%5D=89415016&ids%5B%5D=89407757&ids%5B%5D=89394627&ids%5B%5D=89366243&ids%5B%5D=89344937&ids%5B%5D=89324428&ids%5B%5D=89314159&ids%5B%5D=89298984&ids%5B%5D=89281404&ids%5B%5D=89000548&ids%5B%5D=88416068&ids%5B%5D=88356366&ids%5B%5D=88335313&ids%5B%5D=87437495&ids%5B%5D=86746101&work_category=illustManga&is_first_page=0&lang=zh",
    "https://www.pixiv.net/ajax/user/31832981/profile/illusts?ids%5B%5D=86473355&ids%5B%5D=86431256&ids%5B%5D=86420813&ids%5B%5D=85721436&ids%5B%5D=85693033&ids%5B%5D=85046187&ids%5B%5D=83048407&ids%5B%5D=82902878&ids%5B%5D=82023319&ids%5B%5D=79277971&ids%5B%5D=78441087&ids%5B%5D=78382235&ids%5B%5D=78079818&ids%5B%5D=77246174&ids%5B%5D=76666123&ids%5B%5D=76280748&ids%5B%5D=75989236&ids%5B%5D=75173148&ids%5B%5D=75082244&ids%5B%5D=75075066&ids%5B%5D=72781270&ids%5B%5D=72006012&work_category=illustManga&is_first_page=0&lang=zh",
    "https://www.pixiv.net/ajax/user/12120406/profile/illusts?ids%5B%5D=93859309&ids%5B%5D=93069106&ids%5B%5D=92796825&ids%5B%5D=92774771&ids%5B%5D=92441287&ids%5B%5D=91609541&ids%5B%5D=90902680&ids%5B%5D=90831530&ids%5B%5D=90023643&ids%5B%5D=89529369&ids%5B%5D=89194308&ids%5B%5D=88099593&ids%5B%5D=86941196&ids%5B%5D=86567765&ids%5B%5D=86036590&ids%5B%5D=85245704&ids%5B%5D=84935076&ids%5B%5D=84335074&ids%5B%5D=84179978&ids%5B%5D=83895335&ids%5B%5D=83638748&ids%5B%5D=83228357&ids%5B%5D=82631202&ids%5B%5D=82563350&ids%5B%5D=82432458&ids%5B%5D=82352833&ids%5B%5D=82194222&ids%5B%5D=82094149&ids%5B%5D=81414032&ids%5B%5D=80598099&ids%5B%5D=79367225&ids%5B%5D=78921409&ids%5B%5D=78516910&ids%5B%5D=78409483&ids%5B%5D=77360583&ids%5B%5D=77096709&ids%5B%5D=76082140&ids%5B%5D=75995015&ids%5B%5D=75910917&ids%5B%5D=75748588&ids%5B%5D=74886105&ids%5B%5D=72973607&ids%5B%5D=72727280&ids%5B%5D=72553052&ids%5B%5D=68146134&ids%5B%5D=67882039&work_category=illustManga&is_first_page=1&lang=zh"
]

url_list = []


def get_urls(urls):
    for url in urls:
        r = requests.get(url=url, headers=headers)
        print("状态：", r.raise_for_status, r.apparent_encoding)
        r.encoding = 'utf-8'
        text = r.text

        false = False
        true = True
        null = None
        text = eval(text)['body']['works']

        for value in text.values():
            temp = value['url'].split('\/')
            info_dict = {
                'pid': value['id'],
                'author': value['userName'].encode('utf-8').decode('utf-8'),
                'uid': value['userId'],
                'original': "{}//{}/img-original/{}/{}/{}/{}/{}/{}/{}/{}_p0.png".format(
                    temp[0], temp[2], temp[6], temp[7], temp[8], temp[9], temp[10], temp[11], temp[12], temp[13].split('_')[0]),
                'loacl': "file:///c:/Users/25315/Desktop/文件/图片/pixiv/"+value['id']+"_p0.png"}
            yield info_dict


for i in get_urls(author_list):
    url_list.append(i)

with open("C:\\Users\\25315\\Desktop\\文件\\图片\\pixiv\\file\\download.txt", 'w', encoding='utf-8') as f:
    for i in url_list:
        f.write(i['original'])
        f.write('\n')

with open("C:\\Users\\25315\\Desktop\\文件\\图片\\pixiv\\file\\temp_info.csv", 'w', encoding='utf-8', newline='') as f:
    wr = csv.writer(f)
    for i in url_list:
        wr.writerow(i.values())
